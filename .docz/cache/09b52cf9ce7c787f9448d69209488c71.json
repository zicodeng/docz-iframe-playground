{"remainingRequest":"/Users/zicodeng/docz-iframe-playground/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/zicodeng/docz-iframe-playground/node_modules/docz/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/zicodeng/docz-iframe-playground/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/zicodeng/docz-iframe-playground/node_modules/docz/node_modules/react-hot-loader/babel.js\"],\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/zicodeng/docz-iframe-playground/index.js","dependencies":[{"path":"/Users/zicodeng/docz-iframe-playground/index.js","mtime":1554969465787},{"path":"/Users/zicodeng/docz-iframe-playground/node_modules/docz/node_modules/cache-loader/dist/cjs.js","mtime":1547273196354},{"path":"/Users/zicodeng/docz-iframe-playground/node_modules/babel-loader/lib/index.js","mtime":1547273196070}],"contextDependencies":[],"result":["var _jsxFileName = \"/Users/zicodeng/docz-iframe-playground/index.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nvar IFramePlayground =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(IFramePlayground, _React$Component);\n\n  function IFramePlayground() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, IFramePlayground);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(IFramePlayground)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.ref = React.createRef();\n    _this.state = {\n      container: null // container within which the user content should be rendered\n\n    };\n\n    _this.copyStyles = function () {\n      var iFrameNode = _this.ref.current;\n\n      if (iFrameNode && iFrameNode.contentDocument) {\n        // Copy <link> elements\n        var links = Array.from(document.getElementsByTagName('link'));\n        links.forEach(function (link) {\n          if (link.rel === 'stylesheet') {\n            iFrameNode.contentDocument.head.appendChild(link.cloneNode(true));\n          }\n        }); // Copy <style> elements\n\n        var styles = Array.from(document.head.getElementsByTagName('style'));\n        styles.forEach(function (style) {\n          iFrameNode.contentDocument.head.appendChild(style.cloneNode(true));\n        });\n      }\n    };\n\n    _this.handleLoad = function () {\n      var iFrameNode = _this.ref.current;\n\n      if (iFrameNode && iFrameNode.contentDocument && iFrameNode.contentDocument.body) {\n        _this.setState({\n          container: iFrameNode.contentDocument.body\n        });\n\n        _this.copyStyles();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(IFramePlayground, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          style = _this$props.style;\n      var container = this.state.container;\n      var iFrameNode = this.ref.current;\n      return React.createElement(\"iframe\", {\n        sandbox: \"allow-same-origin\",\n        ref: this.ref,\n        srcDoc: '<!DOCTYPE html>',\n        style: _objectSpread({\n          width: '100%',\n          border: 'none'\n        }, style),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, container && iFrameNode && iFrameNode.contentDocument && ReactDOM.createPortal(children, container));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var iFrameNode = this.ref.current;\n\n      if (iFrameNode) {\n        iFrameNode.addEventListener('load', this.handleLoad);\n      }\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return IFramePlayground;\n}(React.Component);\n\nvar _default = IFramePlayground;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(IFramePlayground, \"IFramePlayground\", \"/Users/zicodeng/docz-iframe-playground/index.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/zicodeng/docz-iframe-playground/index.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();\n\nIFramePlayground.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"copyStyles\",\n    \"docblock\": \"Because <iframe> serves content in an isolated browsing context (document environment),\\nStyles in parent browsing context will not be available to <iframe> content,\\nwe need to manually copy styles from parent browsing context to <iframe> browsing context\",\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null,\n    \"description\": \"Because <iframe> serves content in an isolated browsing context (document environment),\\nStyles in parent browsing context will not be available to <iframe> content,\\nwe need to manually copy styles from parent browsing context to <iframe> browsing context\"\n  }, {\n    \"name\": \"handleLoad\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"IFramePlayground\"\n};",{"version":3,"sources":["/Users/zicodeng/docz-iframe-playground/index.js"],"names":["React","ReactDOM","IFramePlayground","ref","createRef","state","container","copyStyles","iFrameNode","current","contentDocument","links","Array","from","document","getElementsByTagName","forEach","link","rel","head","appendChild","cloneNode","styles","style","handleLoad","body","setState","props","children","width","border","createPortal","addEventListener","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;;IAEMC,gB;;;;;;;;;;;;;;;;;UACJC,G,GAAMH,KAAK,CAACI,SAAN,E;UACNC,K,GAAQ;AACNC,MAAAA,SAAS,EAAE,IADL,CACW;;AADX,K;;UASRC,U,GAAa,YAAM;AACjB,UAAMC,UAAU,GAAG,MAAKL,GAAL,CAASM,OAA5B;;AACA,UAAID,UAAU,IAAIA,UAAU,CAACE,eAA7B,EAA8C;AAC5C;AACA,YAAMC,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,CAAX,CAAd;AACAJ,QAAAA,KAAK,CAACK,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpB,cAAIA,IAAI,CAACC,GAAL,KAAa,YAAjB,EAA+B;AAC7BV,YAAAA,UAAU,CAACE,eAAX,CAA2BS,IAA3B,CAAgCC,WAAhC,CAA4CH,IAAI,CAACI,SAAL,CAAe,IAAf,CAA5C;AACD;AACF,SAJD,EAH4C,CAS5C;;AACA,YAAMC,MAAM,GAAGV,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACK,IAAT,CAAcJ,oBAAd,CAAmC,OAAnC,CAAX,CAAf;AACAO,QAAAA,MAAM,CAACN,OAAP,CAAe,UAAAO,KAAK,EAAI;AACtBf,UAAAA,UAAU,CAACE,eAAX,CAA2BS,IAA3B,CAAgCC,WAAhC,CAA4CG,KAAK,CAACF,SAAN,CAAgB,IAAhB,CAA5C;AACD,SAFD;AAGD;AACF,K;;UAEDG,U,GAAa,YAAM;AACjB,UAAMhB,UAAU,GAAG,MAAKL,GAAL,CAASM,OAA5B;;AACA,UACED,UAAU,IACVA,UAAU,CAACE,eADX,IAEAF,UAAU,CAACE,eAAX,CAA2Be,IAH7B,EAIE;AACA,cAAKC,QAAL,CAAc;AACZpB,UAAAA,SAAS,EAAEE,UAAU,CAACE,eAAX,CAA2Be;AAD1B,SAAd;;AAGA,cAAKlB,UAAL;AACD;AACF,K;;;;;;;6BAEQ;AAAA,wBACqB,KAAKoB,KAD1B;AAAA,UACCC,QADD,eACCA,QADD;AAAA,UACWL,KADX,eACWA,KADX;AAAA,UAECjB,SAFD,GAEe,KAAKD,KAFpB,CAECC,SAFD;AAGP,UAAME,UAAU,GAAG,KAAKL,GAAL,CAASM,OAA5B;AACA,aACE;AACE,QAAA,OAAO,EAAC,mBADV;AAEE,QAAA,GAAG,EAAE,KAAKN,GAFZ;AAGE,QAAA,MAAM,EAAE,iBAHV;AAIE,QAAA,KAAK;AACH0B,UAAAA,KAAK,EAAE,MADJ;AAEHC,UAAAA,MAAM,EAAE;AAFL,WAGAP,KAHA,CAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUGjB,SAAS,IACRE,UADD,IAECA,UAAU,CAACE,eAFZ,IAGCT,QAAQ,CAAC8B,YAAT,CAAsBH,QAAtB,EAAgCtB,SAAhC,CAbJ,CADF;AAiBD;;;wCAEmB;AAClB,UAAME,UAAU,GAAG,KAAKL,GAAL,CAASM,OAA5B;;AACA,UAAID,UAAJ,EAAgB;AACdA,QAAAA,UAAU,CAACwB,gBAAX,CAA4B,MAA5B,EAAoC,KAAKR,UAAzC;AACD;AACF;;;;;;;;;;;EAxE4BxB,KAAK,CAACiC,S;;eA2EtB/B,gB;AAAf;;;;;;;;;;0BA3EMA,gB","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass IFramePlayground extends React.Component {\n  ref = React.createRef(); // <iframe> ref\n  state = {\n    container: null, // container within which the user content should be rendered\n  };\n\n  /**\n   * Because <iframe> serves content in an isolated browsing context (document environment),\n   * Styles in parent browsing context will not be available to <iframe> content,\n   * we need to manually copy styles from parent browsing context to <iframe> browsing context\n   */\n  copyStyles = () => {\n    const iFrameNode = this.ref.current;\n    if (iFrameNode && iFrameNode.contentDocument) {\n      // Copy <link> elements\n      const links = Array.from(document.getElementsByTagName('link'));\n      links.forEach(link => {\n        if (link.rel === 'stylesheet') {\n          iFrameNode.contentDocument.head.appendChild(link.cloneNode(true));\n        }\n      });\n\n      // Copy <style> elements\n      const styles = Array.from(document.head.getElementsByTagName('style'));\n      styles.forEach(style => {\n        iFrameNode.contentDocument.head.appendChild(style.cloneNode(true));\n      });\n    }\n  };\n\n  handleLoad = () => {\n    const iFrameNode = this.ref.current;\n    if (\n      iFrameNode &&\n      iFrameNode.contentDocument &&\n      iFrameNode.contentDocument.body\n    ) {\n      this.setState({\n        container: iFrameNode.contentDocument.body,\n      });\n      this.copyStyles();\n    }\n  };\n\n  render() {\n    const { children, style } = this.props;\n    const { container } = this.state;\n    const iFrameNode = this.ref.current;\n    return (\n      <iframe\n        sandbox=\"allow-same-origin\"\n        ref={this.ref}\n        srcDoc={'<!DOCTYPE html>'}\n        style={{\n          width: '100%',\n          border: 'none',\n          ...style,\n        }}\n      >\n        {container &&\n          iFrameNode &&\n          iFrameNode.contentDocument &&\n          ReactDOM.createPortal(children, container)}\n      </iframe>\n    );\n  }\n\n  componentDidMount() {\n    const iFrameNode = this.ref.current;\n    if (iFrameNode) {\n      iFrameNode.addEventListener('load', this.handleLoad);\n    }\n  }\n}\n\nexport default IFramePlayground;\n"]}]}